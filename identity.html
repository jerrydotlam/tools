<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui">
  <meta name=format-detection content="telephone=no">

  <title>Jerrylin's tools</title>
  <link rel=icon href=/favicon.ico type=image/x-icon>
  <link rel="shortcut icon" href=/favicon.ico type=image/x-icon>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.bootcss.com/twitter-bootstrap/4.4.1/css/bootstrap.css" rel="stylesheet">
  <style>
  .m-panel {
    float: left;
    width: 500px;
    border: 1px solid #ccc;
    border-radius: 10px;
    padding: 10px;
    margin: 10px;
  }
  .m-panel .input-group {
    margin-bottom: 5px;
  }
  .m-panel .preview {
    margin: 10px 0;
  }
  .m-panel .btn {
    margin-right: 10px;
  }
  </style>
</head>
<body>
  <div class="g-doc">
    <div class="m-panel">
      <ul>
        <li>身份证规则：六位数字地址码+八位数字出生日期码+三位数字顺序码+一位数字校验码
        <li>顺序码规则：对同年、月、日出生的人员编定的顺序号，其中第十七位奇数分给男性，偶数分给女性
        <li>校验码规则：就是以下的计算规则
        <li>例子：输入35018119491001010，计算的身份证即为：350181194910010104
      </ul>
      <form>
        <div class="form-group">
          <label for="exampleFormControlInput1">请输入身份证除最后一位：</label>
          <input type="email" class="form-control" id="v" maxlength="17" placeholder="">
        </div>
        <button type="button" class="btn btn-primary btn-convert" onclick="calc()">计算</button>
      </form>
      <div class="preview" id="r"></div>
    </div>
  </div>
  <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
  <script src="https://cdn.bootcss.com/twitter-bootstrap/4.4.1/js/bootstrap.min.js"></script>
  <script>
  var code = [1,0,'X',9,8,7,6,5,4,3,2];
  var weight = [7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];
  function calc(){
    var strvalue = document.getElementById('v').value;
    var numvalue = [];
    for (var i=0; i<strvalue.length; numvalue[i]=parseInt(strvalue[i]),++i);

    var count = 0;
    for (var i=0; i<numvalue.length; count+=numvalue[i]*weight[i],++i);

    count = count%11;
    document.getElementById('r').innerHTML = "身份证为："+strvalue+code[count];
  }
  </script>
</body>
</html>
